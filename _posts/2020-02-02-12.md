---
title: "[Algorithm] 유니온파인드"
excerpt: "상호 배타적 집합을 표현할 때 사용하는 유니온파인드에 대해 알아보자."
toc: true
toc_sticky: true
categories: [Algorithm]
tags: [Algorithm, 유니온파인드, Disjoint Set, 상호배타적 집합, 서로소 집합]
use_math: true
---

## 상호 배타적 집합과 유니온파인드

### 정의
상호 배타적 집합(**Disjoint Set**)이란 말은 어떤 두 부분집합 사이에 교집합은 없고, 부분집합들의 합집합은 전체 집합인 자료를 의미한다. <br>
유니온파인드는 상호 배타적으로 이루어진 집합을 효율적으로 표현하기 위해 만들어진 자료구조이다. 유니온파인드 자료구조는 여러 원소가 존재할 때, 어떠한 두 원소를 하나의 집합으로 묶거나(**Union**) 두 원소가 같은 집합에 있는지 확인할 때(**Find**) 빠르게 연산할 수 있다. 유니온파인드에는 다음과 같은 연산이 있다.

Union 연산과 Find 연산을 지원해서 유니온파인드 자료구조라고 부른다.

1. Find
- 원소 x를 포함하는 집합을 찾는 연산
2. Union
- 원소 x와 원소 y를 합집합하는 연산


### 배열을 이용한 상호 배타적 집합의 표현
상호 배타적 집합을 표현하는 가장 간단한 방법은 1차원 배열로 표현하는 것이다. 

$$ set[i] = i $$

초기 $set$을 다른 숫자로 초기화하면 서로 다른 $n$개의 집합을 쉽게 만들 수 있다. 이렇게 하면 해당 원소의 집합을 $O(1)$에 찾을 수 있다.  

그러나 합치기 연산을 할 때 한쪽 집합의 원소를 다른쪽 집합으로 옮길 때 $O(n)$의 시간이 걸린다. 합치기 연산이 없을 경우에는 상관이 없지만 일반적으로는 쓰기 힘든 방식이다. 따라서 좀 더 빠른 방법이 필요하다.

### 트리를 이용한 상호 배타적 집합의 표현
트리를 사용해 상호 배타적 집합을 표현하면 유용하게 쓸 수 있다. 한 집합에 속하는 원소들을 트리로 묶어서 표현한다.

<br>

![]({{ site.url }}/assets/images/12-1.png ){: .align-center width="70%" height="60%"}

<br>


## Find
두 원소가 같은 집합에 속해 있는지 확인하는 방법은 각 원소가 포함된 트리의 루트를 찾아 비교하는 것이다. 트리와 루트는 항상 1:1 대응이므로 루트가 같다면 같은 트리에 속해있다. 따라서 트리의 루트에 있는 원소를 각 집합을 대표하는 원소로 설정하자.  
위 그림에서 {1, 2, 3, 4, 5}를 포함하는 집합은 $1$, {6, 7}을 포함하는 집합은 $6$으로 표현할 수 있다.  
이 트리에서의 Find 연산은 주어진 원소가 포함된 집합을 대표하는 원소를 찾는 것이다.  

<br>

```java
private static int find(int x) {
	if (x == parent[x])
		return x;
	return find(parent[x]);
}
```

<br>

### 문제점
트리의 구조가 한 쪽으로 치우치는 경우를 생각해보자. <br>
트리의 모든 원소가 같은 집합일 때 다음과 같은 경우가 생길 수 있다. <br>

![]({{ site.url }}/assets/images/12-2.png ){: .align-center width="70%" height="60%"}

<br>

Find 연산은 트리의 높이에 비례하는 시간으로 $O(n)$을 갖는다. 애초에 배열로 구현하던 것보다 효율이 나빠지게 되었다.  
BST에서 트리가 한 쪽으로 쏠리면 구조를 다시 잡는 것처럼 한 쪽으로 치우치지 않게끔 작업을 해 줄 필요가 있다. 그 방법 중 하나는 두 트리를 합칠 때 항상 높이가 더 낮은 트리를 더 높은 트리 밑에 집어 넣는 것이다.

<br>


![]({{ site.url }}/assets/images/12-3.png ){: width="45%" height="60%"}

![]({{ site.url }}/assets/images/12-4.png ){: width="45%" height="60%"}


<br>

### 

### 경로압축
find 




## Union


```java
private static void union(int x, int y) {
	x = find(x);
	y = find(y);
	if (x != y)
		parent[y] = x;
}
```

<br>
<br>