---
title: "Django 인증 기능"
excerpt: "django에서 지원하는 인증 기능에 대해 알아보자"
toc: true
toc_sticky: true
categories: [Web]
tags: [web, django, python]
use_math: true
---

## Django의 인증 기능

기존의 블로그 앱에 인증 기능을 추가하려고 한다. 인증 기능은 웹 프로그래밍의 필수 기능이며 django가 기본적으로 지원하는 기능 중 하나이다. `django.contrib.auth` 앱에서 인증 기능을 지원한다. `User` 테이블을 기본으로 제공하며 확장하거나 변경할 수 있다. `User` 테이블의 구조는 다음과 같다.  

|필드명|타입|제약조건, 디폴트|설명|
|---|---|---|---|
|id|Integer|PK, Auto Increment|기본 키|
|username|CharField(30)|Unique|로그인 이름|
|first_name|CharField(30)|Blank|사용자 이름|
|last_name|CharField(30)|Blank|사용자 성|
|email|CharField(254)|Blank|이메일 주소|
|is_staff|BooleanField|False|스태프 여부|
|is_active|BooleanField|True|계정 활성화 여부|
|date_joined|DateTimeField|timezon.now|계정 생성 시각|
|password|CharField(128)||비밀번호|
|last_login|DateTimeField|Blank, Null|마지막 로그인 시각|
|is_superuser|BooleanField|False|슈퍼유저(관리자) 여부|
|groups|ManyToManyField(Group)|Blank|사용자가 속한 그룹|
|user_permissions|ManyToManyField(Permission)|Blank|사용자에게 부여된 권한|

<br>

MySQL Workbench에서 확인해보면 다음과 같다. 

![]({{ site.url }}/assets/images/53-1.png ){: .align-center}

<br>

`auth` 앱에서는 이 외에도 `Group`, `Permission` 등의 테이블을 정의하고 있다.  

## URL
django의 인증 기능은 URL과 뷰는 이미 만들어져 있다. 템플릿 파일명은 정해져 있으므로 개발자는 템플릿만 작성하면 된다. 물론 URL, 뷰, 템플릿 모두 커스터마이징 할 수 있다. 다만 회원가입 기능은 제공하지 않으므로 이 부분은 개발자가 직접 작성해야 한다. 이를 정리하면 다음과 같다.

|URL 패턴|뷰 이름|템플릿 파일명|
|---|---|---|
|/login/|LoginView<br>(FormView)|registration/login.html|
|/logout/|LogoutView<br>(TemplateView)|registration/logged_out.html|
|/password_change/|PasswordChangeView<br>(FormView)|registration/password_change_form.html|
|/password_change/done/|PasswordChangeDoneView<br>(TemplateView)|registration/password_change_done.html|
|/password_reset/|PasswordResetView<br>(FormView)|registration/password_reset_form.html<br>registration/password_reset_email.html<br>registration/password_reset_subject.txt|
|/password_reset/done/|PasswordResetDoneView<br>(TemplateView)|registration/password_reset_done.html|
|/reset/\<uidb64\>/\<token\>/|PasswordResetConfirmView<br>(FormView)|registration/password_reset_confirm.html|
|/reset/done/|PasswordResetCompleteView<br>(TemplateView)|registration/password_reset_complete.html|
|**/register/**|UserCreateView<br>(CreateView)|registration/register.html|
|**/register/done/**|UserCreateDoneTV<br>(TemplateView)|registration/register_done.html|

이 중 **/register/**와 **/register/done/**의 기능에 대해서는 개발자가 직접 만들어야 한다.


